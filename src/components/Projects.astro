---
import { Image } from "astro:assets";
import PythonIcon from "@/components/icons/PythonIcon.astro";
import GitHub from "@/components/icons/GitHub.astro";
import Java from "@/components/icons/Java.astro";
import JSIcon from "@/components/icons/JSIcon.astro";
import PostgreIcon from "@/components/icons/PostgreIcon.astro";
import Spring from "@/components/icons/SpringIcon.astro";
import VueIcon from "./icons/VueIcon.astro";
import DBeaverIcon from "./icons/DBeaverIcon.astro";
import { getLangFromUrl, useTranslations } from "@/i18n/utils";

type tLang = (str: any) => any;
const lang = getLangFromUrl(Astro.url);
const t:tLang = useTranslations(lang);

type TagType = {
  name: string;
  class: string;
  icon: (_props: Record<string, any>) => any;
};

type TagsType = {
  [key: string]: TagType;
};

const TAGS: TagsType = {
  JAVA: {
    name: "Java",
    class: "bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-500/30 text-orange-200 backdrop-blur-sm",
    icon: Java,
  },
  SPRING: {
    name: "Spring",
    class: "bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/30 text-green-200 backdrop-blur-sm",
    icon: Spring,
  },
  POSTGRE: {
    name: "PostgreSQL",
    class: "bg-gradient-to-r from-blue-600/10 to-cyan-500/10 border border-blue-500/30 text-blue-200 backdrop-blur-sm",
    icon: PostgreIcon,
  },
  JS: {
    name: "JavaScript",
    class: "bg-gradient-to-r from-yellow-500/10 to-amber-500/10 border border-yellow-500/30 text-yellow-200 backdrop-blur-sm",
    icon: JSIcon,
  },
  PYTHON: {
    name: "Python",
    class: "bg-gradient-to-r from-blue-500/10 to-indigo-500/10 border border-blue-400/30 text-blue-200 backdrop-blur-sm",
    icon: PythonIcon,
  },
  VUE: {
    name: "Vue",
    class: "bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-400/30 text-emerald-200 backdrop-blur-sm",
    icon: VueIcon,
  },
  DBEAVER: {
    name: "DBeaver",
    class: "bg-gradient-to-r from-orange-600/10 to-amber-600/10 border border-orange-400/30 text-orange-200 backdrop-blur-sm",
    icon: DBeaverIcon,
  },
//   TYPESCRIPT: {
//   name: "TypeScript",
//   class: "bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border border-blue-500/30 text-blue-200 backdrop-blur-sm",
//   icon: TypeScriptIcon,
// },

// CPP: {
//   name: "C++",
//   class: "bg-gradient-to-r from-blue-400/10 to-blue-600/10 border border-blue-500/30 text-blue-200 backdrop-blur-sm",
//   icon: CppIcon,
// },

// REACT: {
//   name: "React",
//   class: "bg-gradient-to-r from-cyan-400/10 to-blue-400/10 border border-cyan-400/30 text-cyan-200 backdrop-blur-sm",
//   icon: ReactIcon,
// },

// MONGODB: {
//   name: "MongoDB",
//   class: "bg-gradient-to-r from-green-500/10 to-emerald-600/10 border border-green-500/30 text-green-200 backdrop-blur-sm",
//   icon: MongoIcon,
// },

// DOCKER: {
//   name: "Docker",
//   class: "bg-gradient-to-r from-blue-400/10 to-blue-600/10 border border-blue-500/30 text-blue-200 backdrop-blur-sm",
//   icon: DockerIcon,
// },

// KUBERNETES: {
//   name: "Kubernetes",
//   class: "bg-gradient-to-r from-blue-500/10 to-sky-500/10 border border-blue-400/30 text-blue-200 backdrop-blur-sm",
//   icon: KubernetesIcon,
// },

// GIT: {
//   name: "Git",
//   class: "bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-400/30 text-orange-200 backdrop-blur-sm",
//   icon: GitIcon,
// },

// AZURE: {
//   name: "Azure",
//   class: "bg-gradient-to-r from-blue-500/10 to-sky-500/10 border border-blue-300/30 text-blue-200 backdrop-blur-sm",
//   icon: AzureIcon,
// },

// AWS: {
//   name: "AWS",
//   class: "bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border border-yellow-400/30 text-yellow-200 backdrop-blur-sm",
//   icon: AwsIcon,
// },

// LINUX: {
//   name: "Linux",
//   class: "bg-gradient-to-r from-gray-400/10 to-gray-600/10 border border-gray-500/30 text-gray-200 backdrop-blur-sm",
//   icon: LinuxIcon,
// },

// TENSORFLOW: {
//   name: "TensorFlow",
//   class: "bg-gradient-to-r from-orange-500/10 to-yellow-500/10 border border-orange-400/30 text-orange-200 backdrop-blur-sm",
//   icon: TensorFlowIcon,
// },

// PYTORCH: {
//   name: "PyTorch",
//   class: "bg-gradient-to-r from-red-500/10 to-orange-500/10 border border-red-400/30 text-red-200 backdrop-blur-sm",
//   icon: PyTorchIcon,
// },

// SKLEARN: {
//   name: "scikit-learn",
//   class: "bg-gradient-to-r from-orange-400/10 to-blue-400/10 border border-orange-300/30 text-orange-200 backdrop-blur-sm",
//   icon: SklearnIcon,
// },

};

interface ProjectType {
  title: string;
  description: string;
  github: string;
  image: string;
  tags: string[];
}

const PROJECTS: ProjectType[] = t("projects");
---

<div class="space-y-10 py-4">
    {
    PROJECTS.map(({ image, title, description, tags, github }) => (
      <article class="group">
        <div class="relative flex flex-col lg:flex-row gap-8 lg:gap-12 p-6 lg:p-8 rounded-2xl border border-white/5 bg-gradient-to-br from-white/[0.02] to-white/[0.01] backdrop-blur-sm hover:border-white/10 transition-all duration-100">
          
          <div class="w-full lg:w-[55%]">
            <div class="relative overflow-hidden rounded-xl group/image">
              <div class="absolute inset-0 bg-gradient-to-tr opacity-0 group-hover/image:opacity-100 transition-opacity duration-100 z-10 pointer-events-none"></div>
              <div class="absolute -inset-0.5 bg-gradient-to-r rounded-xl opacity-0 group-hover/image:opacity-30 blur transition-opacity duration-100"></div>
              
              <Image
                alt={`Screenshot of project ${title}`}
                class="relative rounded-xl transition-all text-white duration-300 group-hover/image:scale-105 shadow-2xl"
                width={800}
                height={600}
                src={image}
              />
            </div>
          </div>

          <div class="w-full lg:w-[45%] flex flex-col justify-center">
            <h3 class="text-3xl lg:text-4xl font-bold bg-gradient-to-r from-white via-white to-white/60 bg-clip-text text-transparent mb-4 transition-all duration-500">
              {title}
            </h3>
            

            <div class="flex flex-wrap gap-2 mb-1">
              {tags.map((item) => {
                const tag = TAGS[item];
                if (tag) {
                  return (
                    <span class={`flex items-center gap-2 rounded-full text-xs font-medium ${tag.class} py-2 px-3 hover:scale-110 hover:shadow-lg transition-all duration-300`}>
                      <tag.icon class="size-4" />
                      {tag.name}
                    </span>
                  );
                }
              })}
            </div>

            <p class="text-gray-300/90 text-pretty leading-relaxed mb-6">
              {description}
            </p>

            {github && (
              <a
                href={github}
                class="group/btn inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-blue-200/10 to-purple-500/10 border border-blue-500/30 text-blue-200 hover:from-blue-500/10 hover:to-purple-500/10 hover:border-blue-300/50 hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 font-medium w-fit"
                target="_blank"
                rel="noopener noreferrer"
              >
                <GitHub class="size-5 group-hover/btn:rotate-12 transition-transform duration-300" />
                <span>Code</span>
                <svg class="size-4 group-hover/btn:translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </a>
            )}
          </div>
        </div>
      </article>
    ))
  }
</div>