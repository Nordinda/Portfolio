---
import { getLangFromUrl, useTranslations } from "@/i18n/utils";
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const techStack = [
  { name: "Java", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" },
  { name: "Spring Boot", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/spring/spring-original.svg" },
  { name: "Python", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" },
  { name: "JavaScript", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" },
  { name: "TypeScript", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg" },
  //{ name: "C++", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cplusplus/cplusplus-original.svg" },
  { name: "Vue.js", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vuejs/vuejs-original.svg" },
  { name: "React", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg" },
  { name: "PostgreSQL", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg" },
  // { name: "MongoDB", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mongodb/mongodb-original.svg" },
  { name: "Docker", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg" },
  { name: "Kubernetes", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/kubernetes/kubernetes-plain.svg" },
  { name: "Git", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg" },
  { name: "Azure", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/azure/azure-original.svg" },
  { name: "AWS", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/amazonwebservices/amazonwebservices-original-wordmark.svg" },
  { name: "Linux", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linux/linux-original.svg" },
  { name: "TensorFlow", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tensorflow/tensorflow-original.svg" },
  { name: "PyTorch", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/pytorch/pytorch-original.svg" },
  { name: "scikit-learn", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/scikitlearn/scikitlearn-original.svg" },
  { name: "Hugging Face", logo: "https://huggingface.co/front/assets/huggingface_logo-noborder.svg" },
  { name: "C", logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/c/c-original.svg" }

];
---

<section class="relative overflow-hidden">
  <div class="mx-auto max-w-3xl px-5">
    {/* Header */}
    
    {/* Infinite Scroll Carousel */}
    <div class="relative">
      {/* Gradient Overlays */}
      <div class="absolute -left-60 top-0 bottom-0 w-20 bg-gradient-to-r from-[#0a0a0a] to-transparent  pointer-events-none"></div>
      <div class="absolute -right-60 top-0 bottom-0 w-20 bg-gradient-to-l from-[#0a0a0a] to-transparent  pointer-events-none"></div>
      
      {/* Carousel Container */}
      <div class="carousel-track flex gap-6 py-4">
        {/* First set */}
        {techStack.map((tech) => (
          <div class="carousel-item flex-shrink-0 w-28">
            <div class="group relative bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10 hover:border-white/20 hover:bg-white/10 transition-all duration-300 hover:scale-110 cursor-default">
              {/* Logo */}
              <div class="w-full aspect-square flex items-center justify-center mb-2">
                <img 
                  src={tech.logo} 
                  alt={tech.name}
                  class="w-full h-full object-contain opacity-90 group-hover:opacity-100 transition-opacity duration-300"
                />
              </div>
              {/* Tech Name */}
              <div class="text-center">
                <span class="text-xs text-gray-400 group-hover:text-gray-300 transition-colors duration-200 font-medium">
                  {tech.name}
                </span>
              </div>
              {/* Glow effect */}
              <div class="absolute inset-0 rounded-xl bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10 blur-lg"></div>
            </div>
          </div>
        ))}
        {/* Duplicate set for seamless loop */}
        {techStack.map((tech) => (
          <div class="carousel-item flex-shrink-0 w-28">
            <div class="group relative bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10 hover:border-white/20 hover:bg-white/10 transition-all duration-300 hover:scale-110 cursor-default">
              <div class="w-full aspect-square flex items-center justify-center mb-2">
                <img 
                  src={tech.logo} 
                  alt={tech.name}
                  class="w-full h-full object-contain opacity-90 group-hover:opacity-100 transition-opacity duration-300"
                />
              </div>
              <div class="text-center">
                <span class="text-xs text-gray-400 group-hover:text-gray-300 transition-colors duration-200 font-medium">
                  {tech.name}
                </span>
              </div>
              <div class="absolute inset-0 rounded-xl bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10 blur-lg"></div>
            </div>
          </div>
        ))}
      </div>
    </div>

    {/* Pause on Hover Hint */}
    <p class="text-center text-xs text-gray-500 mt-4">{t("techstack.ka")} </p>
  </div>
</section>

<style>
  .carousel-track {
    animation: scroll 20s linear infinite;
    will-change: transform;
  }

  .carousel-track:hover {
    animation-play-state: paused;
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-136px * 19 - 1.5rem * 19)); /* width + gap */
    }
  }

  /* Smooth performance */
  .carousel-track {
    backface-visibility: hidden;
    perspective: 1000px;
  }
</style>

<script>
  // Optional: Add mouse tracking for enhanced interactivity
  document.addEventListener('DOMContentLoaded', () => {
    const track = document.querySelector('.carousel-track');
    if (!track) return;

    let isPaused = false;

    track.addEventListener('mouseenter', () => {
      isPaused = true;
    });

    track.addEventListener('mouseleave', () => {
      isPaused = false;
    });
  });
</script>